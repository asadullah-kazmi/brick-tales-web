# PostgreSQL connection string (use a cloud DB in production, e.g. Neon)
# Local:  postgresql://USER:PASSWORD@localhost:5432/DATABASE
# Neon:   use the connection string from Neon dashboard (Pooled recommended for serverless)
#         postgresql://USER:PASSWORD@ep-xxx-pooler.REGION.aws.neon.tech/neondb?sslmode=require
#         Get it: https://console.neon.tech → Project → Connection string → Pooled connection
DATABASE_URL=""

# JWT (use strong secrets in production)
JWT_ACCESS_SECRET="your-access-secret-min-32-chars"
JWT_REFRESH_SECRET="your-refresh-secret-min-32-chars"
# Optional: token expiry (default: 15m access, 7d refresh)
# JWT_ACCESS_EXPIRES=15m
# JWT_REFRESH_EXPIRES=7d

# Stripe (for subscription checkout and webhooks)
STRIPE_SECRET_KEY="sk_test_..."
STRIPE_WEBHOOK_SECRET="whsec_..."
# Optional: base URL for success/cancel/portal return (default http://localhost:5000)
# APP_URL=https://your-app.com

# Signed HLS play URLs (optional: reuse JWT_ACCESS_SECRET if not set)
# STREAMING_SIGNATURE_SECRET=your-streaming-secret
# Optional: play token expiry (default 1h) – number of seconds or e.g. 30m, 2h
# STREAMING_TOKEN_EXPIRES=3600

# Offline download authorization: days until authorized download expires (default 30)
# DOWNLOAD_EXPIRES_DAYS=30

# Download token: secret for signing (optional: reuse STREAMING_SIGNATURE_SECRET or JWT_ACCESS_SECRET)
# DOWNLOAD_TOKEN_SECRET=your-download-token-secret
# Optional: token expiry (default 1h) – seconds or e.g. 30m, 2h
# DOWNLOAD_TOKEN_EXPIRES=3600

# Background jobs: download expiration, revocation, cleanup (production-safe batching)
# Optional: batch size for download jobs (default 500, max 2000)
# DOWNLOAD_JOBS_BATCH_SIZE=500
# Optional: days to keep EXPIRED/REVOKED download records before cleanup (default 90)
# DOWNLOAD_JOBS_RETENTION_DAYS=90

# Optional: server port (default 5000)
# PORT=5000

# Password reset: frontend base URL for reset link (default: http://localhost:3000)
# FRONTEND_URL=http://localhost:3000

# SMTP for sending password reset emails. If not set, reset link is logged to console (dev).
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_SECURE=false
# SMTP_USER=
# SMTP_PASS=   (quote if value has spaces: "your app password")
# SMTP_FROM=noreply@example.com

# CORS: comma-separated allowed origins (default: http://localhost:3000)
# Required when frontend runs on a different origin. Enable credentials for cookies.
# CORS_ORIGIN=http://localhost:3000
# Or: CORS_ORIGIN=https://app.example.com,https://www.example.com

# FFmpeg path for video transcoding to HLS
# Local development (Windows): C:\path\to\ffmpeg.exe
# Local development (Linux/Mac): ffmpeg (if in PATH) or /usr/bin/ffmpeg
# Railway: ffmpeg (installed via buildpack or Dockerfile)
# Vercel: Not recommended (serverless functions have time limits for transcoding)
FFMPEG_PATH=ffmpeg
